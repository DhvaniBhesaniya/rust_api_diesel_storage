# üìö Rust Task Management API

A simple task management REST API built with **Actix-web**, **Diesel ORM**, and **SQLite**.

---

## üöÄ Project Structure

```
rust_book_store_api/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ main.rs          # Server entry point
‚îÇ   ‚îú‚îÄ‚îÄ models/mod.rs    # Data models (Task, NewTask)
‚îÇ   ‚îú‚îÄ‚îÄ handlers/mod.rs  # Route handlers/controllers
‚îÇ   ‚îî‚îÄ‚îÄ schema.rs        # Database schema (auto-generated by Diesel)
‚îú‚îÄ‚îÄ migrations/          # Diesel database migrations
‚îú‚îÄ‚îÄ Cargo.toml           # Dependencies
‚îú‚îÄ‚îÄ .env                 # Environment variables
‚îî‚îÄ‚îÄ task_manager.db      # SQLite database
```

---

## ‚öôÔ∏è Setup Instructions

### 1. Install Dependencies

```bash
sudo apt-get update
sudo apt-get install libsqlite3-dev
```

> **Note:**  
> `libsqlite3-dev` provides development files for SQLite (headers, static libs).  
> To interact with SQLite databases directly, install the CLI tool:
>
> ```bash
> sudo apt-get install sqlite3
> ```

### 2. Install Diesel CLI

```bash
cargo install diesel_cli --no-default-features --features sqlite
```

### 3. Setup Diesel

Create a `.env` file in the project root:

```env
DATABASE_URL=./task_manager.db
```

Run Diesel setup:

```bash
diesel setup
```

### 4. Create and Run Migration

Generate a migration:

```bash
diesel migration generate create_tasks
```

Edit the generated migration files:

**migrations/<timestamp>_create_tasks/up.sql**
```sql
CREATE TABLE tasks (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    title TEXT NOT NULL,
    completed BOOLEAN NOT NULL DEFAULT false,
    created_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP
);
```

**migrations/<timestamp>_create_tasks/down.sql**
```sql
DROP TABLE tasks;
```

Apply the migration:

```bash
diesel migration run
```


üß± Phase 3: Define Models & Schema
schema.rs
Generated using:

```bash
diesel print-schema > src/schema.rs
```

---

## üñ•Ô∏è Running the Server

```bash
cargo run
```

Server runs at: [http://localhost:8080](http://localhost:8080)

---

## üì¶ API Endpoints

| Method | Endpoint        | Description        | Request Body |
|--------|----------------|-------------------|--------------|
| GET    | `/tasks`       | Get all tasks     | None         |
| POST   | `/tasks`       | Create new task   | JSON         |
| PUT    | `/tasks/{id}`  | Update task       | JSON         |
| DELETE | `/tasks/{id}`  | Delete task       | None         |

---

## üóÉÔ∏è Data Models

### Task (Response)
```json
{
  "id": 1,
  "title": "Sample task",
  "completed": false,
  "created_at": "2025-08-01T12:00:00"
}
```

### NewTask (Request)
```json
{
  "title": "Task title"
}
```

---

## üì¨ Example Requests

### Get all tasks

```bash
curl -X GET http://localhost:8080/tasks
```

### Create a new task

```bash
curl -X POST http://localhost:8080/tasks \
  -H "Content-Type: application/json" \
  -d '{"title": "Read a new book"}'
```

### Update a task

```bash
curl -X PUT http://localhost:8080/tasks/1 \
  -H "Content-Type: application/json" \
  -d '{"title": "Updated task title"}'
```

### Delete a task

```bash
curl -X DELETE http://localhost:8080/tasks/1
```

---

## üõ†Ô∏è Testing with HTTPie

```bash
# Get tasks
http GET localhost:8080/tasks

# Create task
http POST localhost:8080/tasks title="New book to read"

# Update task
http PUT localhost:8080/tasks/1 title="Updated title"

# Delete task
http DELETE localhost:8080/tasks/1
```

---

## üóÑÔ∏è Database Management

### View database directly:
```bash
sqlite3 task_manager.db
```

### Common SQL queries:
```sql
-- View all tasks
SELECT * FROM tasks;
```

```sql
-- Insert a task manually
INSERT INTO tasks (title, completed) VALUES ('Manual task', false);
```

```sql
-- Exit SQLite
.exit
```

---

## üõ†Ô∏è Development Commands

### Install HTTPie for easier testing:
```bash
sudo apt-get install httpie
```

### Run in development mode:
```bash
cargo run
```

### Run tests:
```bash
cargo test
```

### Build for production:
```bash
cargo build --release
```

### Create new migration:
```bash
diesel migration generate migration_name
```

### Reset database:
```bash
rm task_manager.db
diesel migration run
```

---

## üîß Troubleshooting

### If you get "DATABASE_URL not set" error:
```bash
echo 'DATABASE_URL=./task_manager.db' > .env
```

### If diesel command not found:
```bash
export PATH="$HOME/.cargo/bin:$PATH"
source ~/.bashrc
```

### Check if server is running:
```bash
curl http://localhost:8080/tasks
```

---

## üßë‚Äçüíª Tips

- Use [Postman](https://www.postman.com/) or [Insomnia](https://insomnia.rest/) for easy API testing.
- Set `Content-Type: application/json` for POST/PUT requests.
- Use the JSON format shown above for request bodies.
- All code blocks above have copy buttons in most markdown viewers (GitHub, GitLab, VSCode).

---

## ‚ÑπÔ∏è Additional Info

- `libsqlite3-dev` is a development package (not an executable).
- `sqlite3` is the command-line tool for interacting with SQLite databases.
- Server runs on `0.0.0.0:8080` - accessible from any network interface.

---



